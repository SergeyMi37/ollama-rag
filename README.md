# ollama-RAG   üçÅ
# –°–ø–∞—Å–∏–±–æ –∞–≤—Ç–æ—Ä—É https://habr.com/ru/articles/931396/

# –í —ç—Ç–æ–º –∫–æ–¥–µ –º—ã: –∑–∞–≥—Ä—É–∂–∞–µ–º –≤—Å–µ .txt —Ñ–∞–π–ª—ã –∏–∑ –ø–∞–ø–∫–∏, —Ä–µ–∂–µ–º –∏—Ö –Ω–∞ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã –ø–æ ~1000 —Å–∏–º–≤–æ–ª–æ–≤, –ø–æ–ª—É—á–∞–µ–º –¥–ª—è –Ω–∏—Ö —ç–º–±–µ–¥–¥–∏–Ω–≥–∏ —á–µ—Ä–µ–∑ OllamaEmbedding, —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –ª–æ–∫–∞–ª—å–Ω—ã–π –∏–Ω–¥–µ–∫—Å VectorStoreIndex, –∑–∞—Ç–µ–º –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –∏–∑–≤–ª–µ–∫–∞–µ–º —Ç–æ–ø-3 –ø–æ—Ö–æ–∂–∏—Ö —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞ –∏ –ø–µ—Ä–µ–¥–∞–µ–º –∏—Ö –≤–º–µ—Å—Ç–µ —Å –≤–æ–ø—Ä–æ—Å–æ–º –≤ –º–æ–¥–µ–ª—å Ollama. –†–µ–∑—É–ª—å—Ç–∞—Ç ‚Äì —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç. –í —Ä–µ–∞–ª—å–Ω–æ–º —Å—Ü–µ–Ω–∞—Ä–∏–∏, –≤–º–µ—Å—Ç–æ –ø–µ—á–∞—Ç–∏, –º–æ–∂–Ω–æ –æ–±–µ—Ä–Ω—É—Ç—å —ç—Ç–æ –≤ –≤–µ–±-—Å–µ—Ä–≤–∏—Å –∏–ª–∏ —á–∞—Ç-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.


``` bash
git clone https://github.com/SergeyMi37/ollama-rag
cd ollama-rag
```

Create virtual environment (optional)
``` bash
python3 -m venv env
source env/bin/activate
```

Create virtual environment for Windows
``` bash
python -m venv env
source env/Scripts/activate
```

Install all requirements:
``` bash
pip install -r requirements.txt
```

–í—ã–ø–æ–ª–Ω–∏—Ç—å –∑–∞–ø—Ä–æ—Å –∫ –Ω–µ–π—Ä–æ–Ω–∫–µ
``` bash
python llama-core.py # embedding_model="nomic-embed-text"   llm_model="llama2"
python llama-rag.py "mxbai-embed-large" "llama3.1" # –°–æ–≥–ª–∞—Å–Ω–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º, –Ω–∞–∏–±–æ–ª–µ–µ –ø–æ–¥—Ö–æ–¥—è—â–∏–π –Ω–æ–º–µ—Ä —Ç–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –¥–∞–Ω–Ω–æ–π —Ñ—Ä–∞–∑–µ, ‚Äî —ç—Ç–æ 2.2.
python llama-rag.py "mxbai-embed-large" "infidelis/GigaChat-20B-A3B-instruct-v1.5:q5_0" # –¢–µ–∫—Å—Ç "–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤–æ–¥–æ—Å–Ω–∞–±–∂–µ–Ω–∏–µ" —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç–µ–º–µ —Å –Ω–æ–º–µ—Ä–æ–º **2.2**.
```
–í—ã–ø–æ–ª–Ω–∏—Ç—å –∑–∞–ø—Ä–æ—Å –∫ –Ω–µ–π—Ä–æ–Ω–∫–µ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
``` bash
$ python llama-rag-stat.py "mxbai-embed-large" "llama3.1" "–ò—Å–ø–æ–ª—å–∑—É—è –∏—Å—Ö–æ–¥–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã, 
–≤—ã–±–µ—Ä–∏ –Ω–æ–º–µ—Ä —Ç–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–π –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –ø–æ —á–∞—Å—Ç–æ—Ç–Ω–æ–º—É –∞–Ω–∞–ª–∏–∑—É —Å–ª–æ–≤ –¥–ª—è —Ç–µ–∫—Å—Ç–∞: ' 
–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤–æ–¥–æ—Å–Ω–∞–±–∂–µ–Ω–∏–µ'. –í –û—Ç–≤–µ—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤—å —Ç–æ–ª—å–∫–æ –Ω–æ–º–µ—Ä —Ç–µ–º—ã."
```
–°–∏—Å—Ç–µ–º–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è: {'ollama_url': 'http://127.0.0.1:11434', 'docs_directory': 'docs/', 'embedding_model': 'mxbai-embed-large', 'llm_model': 'llama3.1', 'documents_loaded': 1, 'index_initialized': True, 'total_queries': 0}
–û—Ç–≤–µ—Ç 1: 2.2
–í—ã–ø–æ–ª–Ω—è–ª–æ—Å—å:  12.457962989807129

python llama-rag-stat.py "all-minilm" "mistral" "–ò—Å–ø–æ–ª—å–∑—É—è –∏—Å—Ö–æ–¥–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã, –≤—ã–±–µ—Ä–∏ –Ω–æ–º–µ—Ä —Ç–µ–º—ã, –∫–æ—Ç–æ—Ä
—ã–π –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –ø–æ —á–∞—Å—Ç–æ—Ç–Ω–æ–º—É –∞–Ω–∞–ª–∏–∑—É —Å–ª–æ–≤ –¥–ª—è —Ç–µ–∫—Å—Ç–∞: '–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤–æ–¥–æ—Å–Ω–∞–±–∂–µ–Ω–∏–µ'. –û—Ç–≤–µ—Ç –ø—Ä–µ–¥–æ—Å 
—Ç–∞–≤—å —Ç–æ–ª—å–∫–æ –Ω–æ–º–µ—Ä —Ç–µ–º—ã."
=== –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è RAG —Å–∏—Å—Ç–µ–º—ã ===
Ollama URL: http://127.0.0.1:11434
Embedding model: all-minilm initialized
LLM model: mistral initialized
Settings configured
Loaded 1 documents from docs/ in 0.03 seconds
Vector index built in 0.23 seconds
–°–∏—Å—Ç–µ–º–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è: {'ollama_url': 'http://127.0.0.1:11434', 'docs_directory': 'docs/', 'embedding_model': 'all-minilm', 'llm_model': 'mistral', 'documents_loaded': 1, 'index_initialized': True, 'total_queries': 0}
–û—Ç–≤–µ—Ç 1:  2.2 (–æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤–æ–¥–æ—Å–Ω–∞–±–∂–µ–Ω–∏—è)
–í—ã–ø–æ–ª–Ω—è–ª–æ—Å—å:  1.5262219905853271